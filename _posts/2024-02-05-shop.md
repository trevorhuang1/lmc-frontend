---
comments: True
layout: base
title: LMC Shop
description: buying ingredients for points
courses: {'compsci': {'week': 4}}
type: hacks
permalink: /lmc-shop
---
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ingredients Display</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            color: #ffffff;
            background-color: #282c34;
            margin: 0;
            padding: 0;
        }
        .ingredient-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
        .ingredient-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 10px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #FFF2B0;
            color: #282c34;
            border: none;
            border-radius: 5px;
        }
        h2 {
            color: #ffffff;
        }
        .icon {
            margin-bottom: 5px;
        }
        .points {
            margin-top: 5px;
            font-size: 14px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            padding: 8px;
            border-bottom: 1px solid #ddd;
            text-align: left;
        }
        th {
            background-color: #4CAF50;
            color: white;
        }
    </style>
</head>
<body>

<h1>Let 'Em Cook Shop</h1>

<h2>Default Ingredients</h2>
<div class="ingredient-container">
    <button class="ingredient-button" onclick="purchaseIngredient('Eggs', 1)">
        <i class="fas fa-egg icon"></i>
        Eggs
        <div class="points">(0 points)</div>
    </button>
    <button class="ingredient-button" onclick="purchaseIngredient('Milk', 1)">
        <i class="fas fa-glass-milk icon"></i>
        Milk
        <div class="points">(0 points)</div>
    </button>
    <button class="ingredient-button" onclick="purchaseIngredient('Butter', 1)">
        <i class="fas fa-butter icon"></i>
        Butter
        <div class="points">(0 points)</div>
    </button>
    <button class="ingredient-button" onclick="purchaseIngredient('Sugar', 1)">
        <i class="fas fa-cookie icon"></i>
        Sugar
        <div class="points">(0 points)</div>
    </button>
    <button class="ingredient-button" onclick="purchaseIngredient('Flour', 1)">
        <i class="fas fa-flour-bag icon"></i>
        Flour
        <div class="points">(0 points)</div>
    </button>
</div>

<h2>Additional Ingredients</h2>
<div class="ingredient-container">
    <button class="ingredient-button" onclick="purchaseIngredient('Cocoa', 1)">
        <i class="fas fa-coffee icon"></i>
        Cocoa
        <div class="points">(5 points)</div>
    </button>
    <button class="ingredient-button" onclick="purchaseIngredient('Lemon', 1)">
        <i class="fas fa-lemon icon"></i>
        Lemon
        <div class="points">(7 points)</div>
    </button>
    <button class="ingredient-button" onclick="purchaseIngredient('Banana', 1)">
        <i class="fas fa-banana icon"></i>
        Banana
        <div class="points">(9 points)</div>
    </button>
    <button class="ingredient-button" onclick="purchaseIngredient('Apple', 1)">
        <i class="fas fa-apple-alt icon"></i>
        Apple
        <div class="points">(8 points)</div>
    </button>
    <button class="ingredient-button" onclick="purchaseIngredient('Pecan', 1)">
        <i class="fas fa-nut icon"></i>
        Pecan
        <div class="points">(10 points)</div>
    </button>
    <button class="ingredient-button" onclick="purchaseIngredient('Cinnamon', 1)">
        <i class="fas fa-cinnamon icon"></i>
        Cinnamon
        <div class="points">(10 points)</div>
    </button>
    <button class="ingredient-button" onclick="purchaseIngredient('Yeast', 1)">
        <i class="fas fa-flask icon"></i>
        Yeast
        <div class="points">(6 points)</div>
    </button>
</div>

<h2>Inventory</h2>
<table>
    <thead>
        <tr>
            <th>Ingredient</th>
            <th>Quantity Purchased</th>
        </tr>
    </thead>
    <tbody id="owned-ingredients">
        <!-- Purchased ingredients will be displayed here -->
    </tbody>
</table>

<script type="module">
    const loggedinuser = localStorage.getItem('uid');
    
    // GET - every row in data check if uid = loggedinuser
    // if true, then save points value
    // PUT - update the points and items for the user, using uid stored in localstorage (loggedinuser)
    // for buy ingred fxn element item want to buy then points needed to buy
    //compare price to points
    // if points>= value then make put req
    // update points and items
  // uri variable and options object are obtained from config.js
  import { uri, options } from '{{site.baseurl}}/assets/js/api/config.js';
  // Set Users endpoint (list of users)
  function get(){
  const url = uri + '/api/shop/';
  // prepare HTML result container for new output
  const resultContainer = document.getElementById("result");
  // fetch the API
  fetch(url, options)
    // response is a RESTful "promise" on any successful fetch
.then(response => {
    // check for response errors and display
    if (response.status !== 200) {
        if (response.status === 401) {
            // Unauthorized - Redirect to 401 error page
            window.location.href = "/lmc-frontend/lmc-login";
        } else if (response.status === 403) {
            // Forbidden - Redirect to 403 error page
            alert(response.status + " error. Redirecting you to the login")
            const errorMsg = 'Database response error: ' + response.status;
            console.log(errorMsg);
            const tr = document.createElement("tr");
            const td = document.createElement("td");
            td.innerHTML = errorMsg;
            tr.appendChild(td);
            resultContainer.appendChild(tr);
            window.location.href = "/lmc-frontend/lmc-login";
            return;
        }
    }
    // valid response will contain JSON data
    response.json().then(data => {
        console.log(data);
        for (const row of data) {
            // tr and td build out for each row
            const tr = document.createElement("tr");
            const name = document.createElement("td");
            const id = document.createElement("td");
            const age = document.createElement("td");
            const item = document.createElement("td");
            const favoritefood = document.createElement("td");
            // data is specific to the API
            name.innerHTML = row.name;
            id.innerHTML = row.uid;
            age.innerHTML = row.age;
            item.innerHTML = row.item;
            favoritefood.innerHTML = row.favoritefood;
            // this builds td's into tr
            tr.appendChild(name);
            tr.appendChild(id);
            tr.appendChild(age);
            tr.appendChild(item);
            tr.appendChild(favoritefood);
            // append the row to table
            resultContainer.appendChild(tr);
        }
    });
})
  // catch fetch errors (ie ACCESS to server blocked)
  .catch(err => {
    console.error(err);
    const tr = document.createElement("tr");
    const td = document.createElement("td");
    td.innerHTML = err + ": " + url;
    tr.appendChild(td);
    resultContainer.appendChild(tr);
  });
  }
      function put(){
        // Set Authenticate endpoint
        const url = uri + '/api/users/';
        // Set the body of the request to include login data from the DOM
        const body = {
            uid: document.getElementById("uid").value,
            dob: document.getElementById("dob").value,
            name: document.getElementById("name").value,
            item: document.getElementById("item").value,
            favoritefood: document.getElementById("favfood").value
            // favfood: document.getElementById("name").value
        };
        // Change options according to Authentication requirements
        const authOptions = {
            ...options, // This will copy all properties from options
            method: 'PUT', // Override the method property
            cache: 'no-cache', // Set the cache property
            body: JSON.stringify(body)
        };
        // Fetch JWT
        fetch(url, authOptions)
        .then(response => {
            // handle error response from Web API
            if (!response.ok) {
                if (response.status === 401) {
                    // Unauthorized - Redirect to 401 error page
                    window.location.href = "{{site.baseurl}}/401.html";
                }
                else if (response.status === 400) {
                    // Forbidden - Redirect to 403 error page
                    window.location.href = "{{site.baseurl}}/400.html";
                } else if (response.status === 403) {
                    // Forbidden - Redirect to 403 error page
                    window.location.href = "{{site.baseurl}}/403.html";
                } else if (response.status === 400) {
                    // Forbidden - Redirect to 400 error page
                    window.location.href = "{{site.baseurl}}/400.html";
                } else if (response.status === 404) {
                    // Not Found - Redirect to 404 error page
                    window.location.href = "{{site.baseurl}}/404.html";
                } else {
                    // Handle other error responses
                    const errorMsg = 'Login error: ' + response.status;
                    console.log(errorMsg);
                }
                return;
            }
            // Success!!!
            // Redirect to the database page
            window.location.href = "{{site.baseurl}}/data/database";
        })
        // catch fetch errors (ie ACCESS to server blocked)
        .catch(err => {
            console.error(err);
        });
    }
</script>
</body>
</html>